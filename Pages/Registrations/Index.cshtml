@page
@model EventRegistrationWebApp.Pages.Registrations.IndexModel

@{
    ViewData["Title"] = "Index";
}

<h1>Index</h1>

<p>
    <a asp-page="Create">Create New</a>
</p>

<table class="table" id="myTable">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].Gender)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].RegistrationDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].EventDays)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Registration[0].AdditionalRequest)
            </th>
            <th></th>
        </tr>
    </thead>
</table>
@section Scripts {
    @{await Html.RenderPartialAsync("_DataTableScriptsPartial");}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#myTable').DataTable({
                ajax: {
                    url: '/api/Registrations',
                    dataSrc: ''
                },
                processing: false,
                ordering: false,
                paging: false,
                searching: false,
                columns: [
                    { data: 'name' },
                    { data: 'email' },
                    { data: 'gender' },
                    { data: 'registrationDate' },
                    { data: 'eventDays'},
                    { data: 'additionalRequest' }
                ]
            });
        });
    </script>

}
